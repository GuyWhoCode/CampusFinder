<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Campus Finder">
    <meta property="og:description" content="Helping you find your way on campus.">
    <meta property="og:image" content="./img2.jpg"> 
    <!-- Placeholder image for logo when link is posted on platform with rich link embed -->
    <title>Campus Finder</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./style.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.2.0/socket.io.js"></script>
    <script src="./pathfinding.js"></script>
    <script src="./drawnPathsManager.js"></script>
    <script src="./markerManager.js"></script>
    <script src="./map.js"></script>
</head>
<body>    
    <div id="navbar">
        <div id="WHSIcon">
            <a href="https://whs.tusd.org/" target="_blank" id="WHSwebsite">
                <img src="./logo.png" alt="WHS Logo" class=".img-fluid" id="logo">
            </a>
        </div>
        <div id="searchBox">
            <form class="d-flex" action="." id="searchBar" autocomplete="off">
                <input class="form-control" type="search" placeholder="Search Teacher or Classroom" aria-label="Search" id="mainSearch" list="teacherAutocomplete">
                <datalist id="teacherAutocomplete"></datalist>
                <button class="btn" type="submit" id="searchButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                    Search
                </button>
            </form>
        </div>
        <div class="btn-group">
            <button type="button" class="btn dropdown-toggle" id="userInfo" data-bs-toggle="dropdown" aria-expanded="false">
                <svg xmlns="http://www.w3.org/2000/svg" width="32px" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                  </svg>
                </button>
            <ul class="dropdown-menu dropdown-menu-end dropdown-menu-dark" id="quickLinks">
                <li><a class="dropdown-item" data-bs-toggle="offcanvas" href="#classesSidebar" role="button" aria-controls="classesSidebar">View Classes</a></li>
                <li><a class="dropdown-item" href="/admin">Admin Dashboard</a></li>
                <li><a class="dropdown-item" href="/settings">Preferences</a></li>
                <li><a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#betaInformationModal">Beta Information</a></li>
                <!-- TEMP for Beta Information -->
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" id="loginElm">Login with Google</a></li>
            </ul>
        </div>
        <!-- Bootstrap Dropdown Menu -->
    </div>

    <div class="offcanvas offcanvas-start" tabindex="-1" id="classesSidebar" aria-labelledby="classesLabel">
        <div class="offcanvas-header">
            <h4 class="offcanvas-title" id="classesLabel">My Classes</h4>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div id="classListElm">
                Login to see saved classes and add new ones!
            </div>
            <section id="goBottom">
                <div>
                    <a class="btn btn-primary" role="button" id="changeClasses">Change Classes</a>
                    <a class="btn btn-primary" href="/about" role="button">About Us</a>
                </div>
            </section>
        </div>
    </div>
    <!-- Bootstrap Classes Sidebar -->
    
    <input type="search" id="nameOfNode">

    <div id="debugMap">
        <div id="buttons">
            <!-- <p id="startingMarker">Starting marker</p>
            <p id="endingMarker">Ending marker</p>

            <button type="button" id="normalMode">Normal Mode</button>
            <button type="button" id="currentPosMode">Current Position Mode</button>
            <button type="button" id="searchMode">Search Mode</button>

            <button type="button" id="startChooser">Choose starting location</button>
            <button type="button" id="endChooser">Choose ending location</button>
            <button type="button" id="currentLocationChooser">Set start/end as current location</button>

            <br></br> -->

            <button type="button" id="showPaths">Show Paths</button>
            <button type="button" id="hidePaths">Hide Paths</button>
            <button type="button" id="button1">Path 1</button>
            <button type="button" id="button2">Path 2</button>
            <button type="button" id="button3">Path 3</button>
            <button type="button" id="button4">Path 4</button>
            <button type="button" id="button5">Path 5</button>
            <button type="button" id="button6">Path 6</button>

            <br></br>

            <button type="button" id="cafe4Button">Cafe 4</button>
            <button type="button" id="cafe5Button">Cafe 5</button>
            <button type="button" id="adminButton">Admin</button>
            <button type="button" id="bldg2button">Building 2</button>
            <button type="button" id="bldg3button">Building 3</button>
            <button type="button" id="bldg4button">Building 4</button>
            <button type="button" id="bldg5button">Building 5</button>
            <button type="button" id="bldg6button">Building 6</button>
            <button type="button" id="bldg8button">Building 8</button>
            <button type="button" id="gymButton">Gym</button>
            <button type="button" id="pavilionButton">Pavilion</button>
            <button type="button" id="pacButton">PAC</button>
            <button type="button" id="stadiumButton">Stadium</button>
            <button type="button" id="fieldButton">Field</button>

            <br></br>

            <button type="button" id="floorOneBldg4">1st Floor Building 4</button>
            <button type="button" id="floorTwoBldg4">2nd Floor Building 4</button>
            <button type="button" id="floorOneBldg5">1st Floor Building 5</button>
            <button type="button" id="floorTwoBldg5">2nd Floor Building 5</button>
            <button type="button" id="floorOneBldg3">1st Floor Building 3</button>
            <button type="button" id="floorTwoBldg3">2nd Floor Building 3</button>
            <button type="button" id="floorThreeBldg3">3rd Floor Building 3</button>
            <button type="button" id="resetButton">Reset Markers</button>

            <br></br>

            <button type="button" id="classBldgButton">Class Buildings</button>
            <button type="button" id="cafeButton">Cafeterias</button>
            <button type="button" id="otherButton">Other Buildings</button>
            <button type="button" id="resetOutlines">Reset Outlines</button>
        </div>
        <div id="map"></div>
    </div>
    <!-- Eventually, at the end, div debugMap should just resolve to the div with map -->
    
    <div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="classSearchResult" aria-labelledby="searchResultArea">        
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="searchResultArea">Search Result</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div id="buildingCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="./img1.jpeg" class="d-block w-50 carouselImg" alt="Img1">
                    </div>
                    <div class="carousel-item">
                        <img src="./img2.jpeg" class="d-block w-75 carouselImg" alt="Img2">
                    </div>
                    <div class="carousel-item">
                        <img src="./img3.jpeg" class="d-block w-50 carouselImg" alt="Img3">
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#buildingCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#buildingCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            <!-- Bootstrap Carousel -->

            <div id="infoBoxPreview">
                <img id="teacherImg" alt="Teacher Image">
                <div id="classroomAlignment">
                    <p id="teacherSelection" class="noMargin fs-4"></p>
                    <p id="roomNumber" class="noMargin fs-5"></p>
                </div>
            </div>
            <!-- Teacher Image, Room #, and Name -->
            <button type="button" class="btn btn-info" id="goClass">Show Room</button>
        </div>
    </div>
    <!-- Bootstrap Search Result for Classes Sidebar -->

    <div class="modal fade" tabindex="-1" aria-labelledby="classDenialModal" aria-hidden="true" id="classDenialModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Error</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    You must be signed in to change classes.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Error message from Bootstrap Modal when user is not logged in -->

    <div class="modal fade" tabindex="-1" aria-labelledby="betaInformationModal" aria-hidden="true" id="betaInformationModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Beta Information</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Hello voluntary (hopefully) beta tester. Welcome to Campus Finder, an application that helps students navigate their way through campus. This application is a year-long project for the Engineering, Design, and Development (EDD) class, where there's only eight of us total!
                    <br>
                    <br>
                    Since we intend on students at West to use our app, it's only fair that we have the current students conduct tests beyond our internal ones. If you need to bring this page back again, simply click on the User icon in the top right and select "Beta Information." Here's what we want you to do:
                    <br>
                    <ol>
                        <li>Search for a teacher with the search bar and see if their room location is relatively accurate</li>
                        <li>Search for a building at West and ensure that its location is accurate and that it works.</li>
                        <li>Login with Google and input your classes.</li>
                        <li>Check if the path outlined in the Google map is reasonable.</li>
                    </ol>
                    
                    <br>
                    Thanks,
                    <br>
                    The Campus Finder Team: Jason A., Ian, and Jay
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- TEMP Temporary message telling beta testers what to do -->

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCaLWlcr-27e1s6xXMQuXczqfE-Yore6XY&libraries=geometry&callback=initMap"></script>
    <!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCm73VhPn9vsKvea5amla9HORjlOzYEEi4&libraries=geometry&callback=initMap"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="./initialize.js"></script>
    <script src="./offlineLib.js" defer></script>
    <script src="./login.js" type="module" defer></script>
</body>
</html>